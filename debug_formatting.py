#!/usr/bin/env python3
"""
Debug the spacing/formatting issues in the summary output
"""

from proper_slm_summarizer import StateOfTheArtIndicSummarizer

def debug_summary_formatting():
    """Debug the actual summary content vs display issues"""
    
    text = """‡∞≠‡∞æ‡∞∞‡∞§‡∞¶‡±á‡∞∂‡∞Ç ‡∞Ö‡∞®‡±á‡∞¶‡∞ø ‡∞™‡±ç‡∞∞‡∞™‡∞Ç‡∞ö‡∞Ç‡∞≤‡±ã ‡∞Ö‡∞§‡±ç‡∞Ø‡∞Ç‡∞§ ‡∞µ‡±à‡∞µ‡∞ø‡∞ß‡±ç‡∞Ø‡∞≠‡∞∞‡∞ø‡∞§ ‡∞¶‡±á‡∞∂‡∞æ‡∞≤‡∞≤‡±ã ‡∞í‡∞ï‡∞ü‡∞ø‡∞ó‡∞æ ‡∞ó‡±Å‡∞∞‡±ç‡∞§‡∞ø‡∞Ç‡∞ö‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø. ‡∞≠‡∞æ‡∞∑, ‡∞∏‡∞Ç‡∞∏‡±ç‡∞ï‡±É‡∞§‡∞ø, ‡∞Æ‡∞§‡∞Ç, ‡∞µ‡±á‡∞∑‡∞≠‡∞æ‡∞∑, ‡∞Ü‡∞ö‡∞æ‡∞∞‡∞æ‡∞≤‡±Å, ‡∞≠‡±ã‡∞ú‡∞® ‡∞Ö‡∞≤‡∞µ‡∞æ‡∞ü‡±ç‡∞≤‡±Å ‡∞Æ‡±ä‡∞¶‡∞≤‡±à‡∞® ‡∞Ö‡∞®‡±á‡∞ï ‡∞Ö‡∞Ç‡∞∂‡∞æ‡∞≤‡∞≤‡±ã ‡∞≠‡∞æ‡∞∞‡∞§‡∞¶‡±á‡∞∂‡∞Ç‡∞≤‡±ã ‡∞µ‡∞ø‡∞≠‡∞ø‡∞®‡±ç‡∞®‡∞§ ‡∞∏‡±ç‡∞™‡∞∑‡±ç‡∞ü‡∞Ç‡∞ó‡∞æ ‡∞ï‡∞®‡∞ø‡∞™‡∞ø‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø. ‡∞™‡±ç‡∞∞‡∞§‡∞ø ‡∞∞‡∞æ‡∞∑‡±ç‡∞ü‡±ç‡∞∞‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞§‡∞æ‡∞®‡±Å ‡∞™‡±ç‡∞∞‡∞§‡±ç‡∞Ø‡±á‡∞ï‡∞Ç‡∞ó‡∞æ ‡∞Ö‡∞≠‡∞ø‡∞µ‡±É‡∞¶‡±ç‡∞ß‡∞ø‡∞ö‡±á‡∞∏‡±Å‡∞ï‡±Å‡∞®‡±ç‡∞® ‡∞∏‡∞Ç‡∞™‡±ç‡∞∞‡∞¶‡∞æ‡∞Ø‡∞æ‡∞≤‡±Å, ‡∞™‡∞Ç‡∞°‡±Å‡∞ó‡∞≤‡±Å, ‡∞≠‡∞æ‡∞∑‡∞≤‡±Å ‡∞â‡∞Ç‡∞ü‡∞æ‡∞Ø‡∞ø. ‡∞â‡∞¶‡∞æ‡∞π‡∞∞‡∞£‡∞ï‡±Å, ‡∞â‡∞§‡±ç‡∞§‡∞∞ ‡∞≠‡∞æ‡∞∞‡∞§‡∞¶‡±á‡∞∂‡∞Ç‡∞≤‡±ã ‡∞π‡∞ø‡∞Ç‡∞¶‡±Ä ‡∞é‡∞ï‡±ç‡∞ï‡±Å‡∞µ‡∞ó‡∞æ ‡∞Æ‡∞æ‡∞ü‡±ç‡∞≤‡∞æ‡∞°‡∞ø‡∞§‡±á, ‡∞¶‡∞ï‡±ç‡∞∑‡∞ø‡∞£ ‡∞≠‡∞æ‡∞∞‡∞§‡∞¶‡±á‡∞∂‡∞Ç‡∞≤‡±ã ‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å, ‡∞§‡∞Æ‡∞ø‡∞≥‡∞Ç, ‡∞ï‡∞®‡±ç‡∞®‡∞°, ‡∞Æ‡∞≤‡∞Ø‡∞æ‡∞≥‡∞Ç ‡∞µ‡∞Ç‡∞ü‡∞ø ‡∞≠‡∞æ‡∞∑‡∞≤‡±Å ‡∞Æ‡∞æ‡∞ü‡±ç‡∞≤‡∞æ‡∞°‡∞§‡∞æ‡∞∞‡±Å. ‡∞Æ‡∞§‡∞™‡∞∞‡∞Ç‡∞ó‡∞æ ‡∞ï‡±Ç‡∞°‡∞æ ‡∞π‡∞ø‡∞Ç‡∞¶‡±Ç‡∞Æ‡∞§‡∞Ç, ‡∞á‡∞∏‡±ç‡∞≤‡∞æ‡∞Ç, ‡∞ï‡±ç‡∞∞‡±à‡∞∏‡±ç‡∞§‡∞µ‡∞Ç, ‡∞∏‡∞ø‡∞ï‡±ç‡∞ï‡∞ø‡∞ú‡∞Ç, ‡∞¨‡±å‡∞¶‡±ç‡∞ß‡∞Ç, ‡∞ú‡±à‡∞®‡∞ø‡∞ú‡∞Ç ‡∞≤‡∞æ‡∞Ç‡∞ü‡∞ø ‡∞Æ‡∞§‡∞æ‡∞≤‡±Å ‡∞∂‡∞æ‡∞Ç‡∞§‡∞ø‡∞Ø‡±Å‡∞§‡∞Ç‡∞ó‡∞æ ‡∞∏‡∞π‡∞ú‡±Ä‡∞µ‡∞®‡∞Ç ‡∞ö‡±á‡∞∏‡±ç‡∞§‡±Ç ‡∞¶‡±á‡∞∂ ‡∞∏‡∞Ç‡∞∏‡±ç‡∞ï‡±É‡∞§‡∞ø‡∞®‡∞ø ‡∞Æ‡∞∞‡∞ø‡∞Ç‡∞§ ‡∞™‡∞∞‡∞ø‡∞™‡±Å‡∞∑‡±ç‡∞ü‡∞ø‡∞ó‡∞æ ‡∞Æ‡∞æ‡∞∞‡±ç‡∞ö‡±Å‡∞§‡±Å‡∞®‡±ç‡∞®‡∞æ‡∞Ø‡∞ø. ‡∞à ‡∞µ‡∞ø‡∞≠‡∞ø‡∞®‡±ç‡∞®‡∞§ ‡∞Æ‡∞ß‡±ç‡∞Ø‡∞≤‡±ã ‡∞è‡∞ï‡∞§‡±ç‡∞µ ‡∞≠‡∞æ‡∞µ‡∞®‡∞®‡±Å ‡∞ï‡∞≤‡∞ø‡∞ó‡∞ø‡∞Ç‡∞ö‡∞°‡∞Ç ‡∞≠‡∞æ‡∞∞‡∞§‡∞¶‡±á‡∞∂ ‡∞™‡±ç‡∞∞‡∞§‡±ç‡∞Ø‡±á‡∞ï‡∞§. '‡∞è‡∞ï‡∞§‡∞≤‡±ã ‡∞Ö‡∞®‡±á‡∞ï‡∞§' ‡∞Ö‡∞®‡±á ‡∞∏‡±Ç‡∞§‡±ç‡∞∞‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞Ü‡∞ö‡∞∞‡∞ø‡∞∏‡±ç‡∞§‡±Ç, ‡∞≠‡∞æ‡∞∞‡∞§ ‡∞™‡±ç‡∞∞‡∞ú‡∞≤‡±Å ‡∞§‡∞Æ ‡∞µ‡∞ø‡∞≠‡∞ø‡∞®‡±ç‡∞®‡∞§‡∞®‡±Å ‡∞ó‡±å‡∞∞‡∞µ‡∞ø‡∞Ç‡∞ö‡±Å‡∞ï‡±Å‡∞Ç‡∞ü‡±Ç ‡∞í‡∞ï ‡∞¶‡±á‡∞∂‡∞Ç‡∞ó‡∞æ ‡∞Æ‡±Å‡∞Ç‡∞¶‡±Å‡∞ï‡±Ü‡∞≥‡±ç‡∞§‡±Å‡∞®‡±ç‡∞®‡∞æ‡∞∞‡±Å. ‡∞≠‡∞æ‡∞∞‡∞§ ‡∞µ‡±à‡∞µ‡∞ø‡∞ß‡±ç‡∞Ø‡∞Æ‡∞Ç‡∞§‡∞æ ‡∞¶‡±á‡∞∂ ‡∞∏‡∞Ç‡∞∏‡±ç‡∞ï‡±É‡∞§‡∞ø‡∞®‡∞ø, ‡∞ö‡∞∞‡∞ø‡∞§‡±ç‡∞∞‡∞®‡±Å, ‡∞ê‡∞ï‡±ç‡∞Ø‡∞§‡∞®‡±Å ‡∞™‡±ç‡∞∞‡∞§‡∞ø‡∞¨‡∞ø‡∞Ç‡∞¨‡∞ø‡∞Ç‡∞ö‡±á ‡∞∂‡∞ï‡±ç‡∞§‡∞ø‡∞µ‡∞Ç‡∞§‡∞Æ‡±à‡∞® ‡∞∞‡±Ç‡∞™‡∞ï‡∞≤‡±ç‡∞™‡∞®‡∞ó‡∞æ ‡∞®‡∞ø‡∞≤‡∞ø‡∞ö‡∞ø‡∞Ç‡∞¶‡∞ø."""
    
    print("üîç DEBUGGING SUMMARY FORMATTING ISSUES")
    print("=" * 60)
    
    summarizer = StateOfTheArtIndicSummarizer()
    summary, method = summarizer.summarize(text, max_length=350)
    
    print(f"üìù Raw summary length: {len(summary)}")
    print(f"üîß Method: {method}")
    print()
    
    # Show raw bytes to check for hidden characters
    print("üîç Raw summary bytes:")
    print(repr(summary))
    print()
    
    # Show character by character analysis
    print("üîç Character analysis:")
    for i, char in enumerate(summary):
        if ord(char) < 32 or ord(char) > 126 and ord(char) < 0x0C00:  # Control chars or non-Telugu
            print(f"   Position {i}: '{char}' (ord: {ord(char)})")
    
    # Show clean version
    print()
    print("üßπ Clean version (removing extra spaces):")
    clean_summary = ' '.join(summary.split())
    print(clean_summary)
    print()
    print(f"üìè Clean length: {len(clean_summary)}")
    
    # Check individual sentences
    print()
    print("üìã Sentence breakdown:")
    sentences = summarizer._preprocess_text(summary)
    for i, sentence in enumerate(sentences, 1):
        print(f"   {i}. '{sentence.strip()}'")
        print(f"      Length: {len(sentence.strip())}")

if __name__ == "__main__":
    debug_summary_formatting()
